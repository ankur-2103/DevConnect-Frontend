<div class="container mx-auto px-4 py-2">
  <app-infinite-scroll
    [loadMoreData]="loadMorePosts"
    [itemTemplate]="postTemplate"
    [loadingTemplate]="loadingTemplate"
    (itemSelected)="onPostSelected($event)"
  >
    <ng-template #postTemplate let-items>
      <div class="mb-4 flex flex-col gap-4 items-center">
        <app-post-view
          *ngFor="let post of items"
          class="md:max-w-[70vw]"
          [postData]="post"
          [showActions]="true"
          (postUpdated)="onPostUpdated($event)"
          (postDeleted)="onPostDeleted($event)"
        ></app-post-view>
      </div>
    </ng-template>
    <ng-template #loadingTemplate>
      <div class="flex flex-col gap-4 justify-center items-center">
        <div
          class="bg-white rounded-lg shadow-md p-4 min-w-full md:max-w-[70vw] md:min-w-[70vw]"
        >
          <div class="flex flex-col gap-3">
            <!-- User Info -->
            <div class="flex items-center gap-2 mb-2">
              <p-skeleton shape="circle" size="2rem"></p-skeleton>
              <p-skeleton height="1rem" class="w-[80px]"></p-skeleton>
            </div>

            <!-- Post Content -->
            <div class="relative">
              <div class="flex flex-col gap-2">
                <p-skeleton height="2rem" class="mb-2"></p-skeleton>
                <p-skeleton height="1rem" class="mb-2"></p-skeleton>
                <p-skeleton height="1rem" class="mb-2"></p-skeleton>
                <p-skeleton height="1rem"></p-skeleton>
              </div>
            </div>
            <!-- Post Footer -->
            <div
              class="flex items-centerb gap-4 pt-2 border-t border-gray-100"
            >
              <div class="flex items-center gap-2">
                <p-button
                  type="button"
                  [outlined]="true"
                  [loading]="true"
                  styleClass="border-none"
                >
                </p-button>
                <p-skeleton height="1rem" class="w-[40px]"></p-skeleton>
              </div>
              <div class="flex items-center gap-2">
                <p-button
                  type="button"
                  [outlined]="true"
                  [loading]="true"
                  styleClass="border-none"
                >
                </p-button>
                <p-skeleton height="1rem" class="w-[40px]"></p-skeleton>
              </div>
            </div>
          </div>
        </div>
        
        <div
          class="bg-white rounded-lg shadow-md p-4 min-w-full md:max-w-[70vw] md:min-w-[70vw]"
        >
          <div class="flex flex-col gap-3">
            <!-- User Info -->
            <div class="flex items-center gap-2 mb-2">
              <p-skeleton shape="circle" size="2rem"></p-skeleton>
              <p-skeleton height="1rem" class="w-[80px]"></p-skeleton>
            </div>

            <!-- Post Content -->
            <div class="relative">
              <div class="flex flex-col gap-2">
                <p-skeleton height="2rem" class="mb-2"></p-skeleton>
                <p-skeleton height="1rem" class="mb-2"></p-skeleton>
                <p-skeleton height="1rem" class="mb-2"></p-skeleton>
                <p-skeleton height="1rem"></p-skeleton>
              </div>
            </div>
            <!-- Post Footer -->
            <div
              class="flex items-centerb gap-4 pt-2 border-t border-gray-100"
            >
              <div class="flex items-center gap-2">
                <p-button
                  type="button"
                  [outlined]="true"
                  [loading]="true"
                  styleClass="border-none"
                >
                </p-button>
                <p-skeleton height="1rem" class="w-[40px]"></p-skeleton>
              </div>
              <div class="flex items-center gap-2">
                <p-button
                  type="button"
                  [outlined]="true"
                  [loading]="true"
                  styleClass="border-none"
                >
                </p-button>
                <p-skeleton height="1rem" class="w-[40px]"></p-skeleton>
              </div>
            </div>
          </div>
        </div>
      </div>
    </ng-template>
  </app-infinite-scroll>
</div>
